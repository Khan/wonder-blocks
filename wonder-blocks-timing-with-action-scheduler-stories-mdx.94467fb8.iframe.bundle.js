/*! For license information please see wonder-blocks-timing-with-action-scheduler-stories-mdx.94467fb8.iframe.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunkwonder_blocks=self.webpackChunkwonder_blocks||[]).push([[7897],{"./node_modules/@mdx-js/react/lib/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{NF:()=>withMDXComponents,Zo:()=>MDXProvider,ah:()=>useMDXComponents,pC:()=>MDXContext});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");const MDXContext=react__WEBPACK_IMPORTED_MODULE_0__.createContext({});function withMDXComponents(Component){return function boundMDXComponent(props){const allComponents=useMDXComponents(props.components);return react__WEBPACK_IMPORTED_MODULE_0__.createElement(Component,{...props,allComponents})}}function useMDXComponents(components){const contextComponents=react__WEBPACK_IMPORTED_MODULE_0__.useContext(MDXContext);return react__WEBPACK_IMPORTED_MODULE_0__.useMemo((()=>"function"==typeof components?components(contextComponents):{...contextComponents,...components}),[contextComponents,components])}const emptyObject={};function MDXProvider({components,children,disableParentContext}){let allComponents;return allComponents=disableParentContext?"function"==typeof components?components({}):components||emptyObject:useMDXComponents(components),react__WEBPACK_IMPORTED_MODULE_0__.createElement(MDXContext.Provider,{value:allComponents},children)}},"./.storybook/components/component-info.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("./node_modules/react/index.js");var _khanacademy_wonder_blocks_button__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/wonder-blocks-button/dist/es/index.js"),_khanacademy_wonder_blocks_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/wonder-blocks-core/dist/es/index.js"),_khanacademy_wonder_blocks_typography__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/wonder-blocks-typography/dist/es/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/react/jsx-runtime.js");const githubIconAsset={small:"M8 0C3.58 0 0 3.58 0 8C0 11.54 2.29 14.53 5.47 15.59C5.87 15.66 6.02 15.42 6.02 15.21C6.02 15.02 6.01 14.39 6.01 13.72C4 14.09 3.48 13.23 3.32 12.78C3.23 12.55 2.84 11.84 2.5 11.65C2.22 11.5 1.82 11.13 2.49 11.12C3.12 11.11 3.57 11.7 3.72 11.94C4.44 13.15 5.59 12.81 6.05 12.6C6.12 12.08 6.33 11.73 6.56 11.53C4.78 11.33 2.92 10.64 2.92 7.58C2.92 6.71 3.23 5.99 3.74 5.43C3.66 5.23 3.38 4.41 3.82 3.31C3.82 3.31 4.49 3.1 6.02 4.13C6.66 3.95 7.34 3.86 8.02 3.86C8.7 3.86 9.38 3.95 10.02 4.13C11.55 3.09 12.22 3.31 12.22 3.31C12.66 4.41 12.38 5.23 12.3 5.43C12.81 5.99 13.12 6.7 13.12 7.58C13.12 10.65 11.25 11.33 9.47 11.53C9.76 11.78 10.01 12.26 10.01 13.01C10.01 14.08 10 14.94 10 15.21C10 15.42 10.15 15.67 10.55 15.59C13.71 14.53 16 11.53 16 8C16 3.58 12.42 0 8 0Z"},ComponentInfo=({name,version})=>{var _name$split;const packageFolder=null==(_name$split=name.split("/"))?void 0:_name$split[1];return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(_khanacademy_wonder_blocks_core__WEBPACK_IMPORTED_MODULE_2__.G7,{style:{justifyContent:"flex-end",alignItems:"center",flexDirection:"row",gap:10},children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(_khanacademy_wonder_blocks_typography__WEBPACK_IMPORTED_MODULE_3__.YS,{children:[name,"@",version]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_khanacademy_wonder_blocks_button__WEBPACK_IMPORTED_MODULE_1__.Z,{kind:"secondary",href:`https://github.com/Khan/wonder-blocks/tree/main/packages/${packageFolder}`,target:"_blank",style:{color:"black"},icon:githubIconAsset,children:"Source code"})]})};ComponentInfo.displayName="ComponentInfo";const __WEBPACK_DEFAULT_EXPORT__=ComponentInfo;try{componentinfo.displayName="componentinfo",componentinfo.__docgenInfo={description:"An internal component that displays the package name and version. It also\nincludes a link to the Github repo.",displayName:"componentinfo",props:{name:{defaultValue:null,description:"The package name.",name:"name",required:!0,type:{name:"string"}},version:{defaultValue:null,description:"The latest stable version.",name:"version",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES[".storybook/components/component-info.tsx#componentinfo"]={docgenInfo:componentinfo.__docgenInfo,name:"componentinfo",path:".storybook/components/component-info.tsx#componentinfo"})}catch(__react_docgen_typescript_loader_error){}},"./packages/wonder-blocks-timing/dist/es/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{$K:()=>withActionScheduler,KS:()=>useTimeout,Tt:()=>ClearPolicy,Yz:()=>useInterval,cy:()=>useScheduledTimeout,fk:()=>SchedulePolicy,kb:()=>useScheduledInterval});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");const SchedulePolicy={Immediately:"schedule-immediately",OnDemand:"schedule-on-demand"},ClearPolicy={Resolve:"resolve-on-clear",Cancel:"cancel-on-clear"};class Timeout{constructor(action,timeoutMs,schedulePolicy=SchedulePolicy.Immediately){if(this._timeoutId=void 0,this._action=void 0,this._timeoutMs=void 0,"function"!=typeof action)throw new Error("Action must be a function");if(timeoutMs<0)throw new Error("Timeout period must be >= 0");this._action=action,this._timeoutMs=timeoutMs,schedulePolicy===SchedulePolicy.Immediately&&this.set()}get isSet(){return null!=this._timeoutId}set(){this.isSet&&this.clear(ClearPolicy.Cancel),this._timeoutId=setTimeout((()=>this.clear(ClearPolicy.Resolve)),this._timeoutMs)}clear(policy=ClearPolicy.Cancel){const timeoutId=this._timeoutId;this._timeoutId=null,null!=timeoutId&&(clearTimeout(timeoutId),policy===ClearPolicy.Resolve&&this._action())}}class Interval{constructor(action,intervalMs,schedulePolicy=SchedulePolicy.Immediately){if(this._intervalId=void 0,this._action=void 0,this._intervalMs=void 0,"function"!=typeof action)throw new Error("Action must be a function");if(intervalMs<1)throw new Error("Interval period must be >= 1");this._action=action,this._intervalMs=intervalMs,schedulePolicy===SchedulePolicy.Immediately&&this.set()}get isSet(){return null!=this._intervalId}set(){this.isSet&&this.clear(ClearPolicy.Cancel),this._intervalId=setInterval((()=>this._action()),this._intervalMs)}clear(policy=ClearPolicy.Cancel){const intervalId=this._intervalId;this._intervalId=null,null!=intervalId&&(clearInterval(intervalId),policy===ClearPolicy.Resolve&&this._action())}}class AnimationFrame{constructor(action,schedulePolicy=SchedulePolicy.Immediately){if(this._animationFrameId=void 0,this._action=void 0,"function"!=typeof action)throw new Error("Action must be a function");this._action=action,schedulePolicy===SchedulePolicy.Immediately&&this.set()}get isSet(){return null!=this._animationFrameId}set(){this.isSet&&this.clear(ClearPolicy.Cancel),this._animationFrameId=requestAnimationFrame((time=>this.clear(ClearPolicy.Resolve,time)))}clear(policy=ClearPolicy.Cancel,time){const animationFrameId=this._animationFrameId;this._animationFrameId=null,null!=animationFrameId&&(cancelAnimationFrame(animationFrameId),policy===ClearPolicy.Resolve&&this._action(time||performance.now()))}}class ActionScheduler{constructor(){this._disabled=!1,this._registeredActions=[]}timeout(action,period,options){if(this._disabled)return ActionScheduler.NoopAction;const timeout=new Timeout(action,period,null==options?void 0:options.schedulePolicy);return this._registeredActions.push((()=>timeout.clear(null==options?void 0:options.clearPolicy))),timeout}interval(action,period,options){if(this._disabled)return ActionScheduler.NoopAction;const interval=new Interval(action,period,null==options?void 0:options.schedulePolicy);return this._registeredActions.push((()=>interval.clear(null==options?void 0:options.clearPolicy))),interval}animationFrame(action,options){if(this._disabled)return ActionScheduler.NoopAction;const animationFrame=new AnimationFrame(action,null==options?void 0:options.schedulePolicy);return this._registeredActions.push((()=>animationFrame.clear(null==options?void 0:options.clearPolicy))),animationFrame}clearAll(){const registered=[...this._registeredActions];this._registeredActions=[],registered.forEach((clearFn=>clearFn()))}disable(){this._disabled=!0,this.clearAll()}}ActionScheduler.NoopAction={set:()=>{},get isSet(){return!1},clear:()=>{}};class ActionSchedulerProvider extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(...args){super(...args),this._actionScheduler=new ActionScheduler}componentWillUnmount(){this._actionScheduler.disable()}render(){const{children}=this.props;return children(this._actionScheduler)}}function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}function withActionScheduler(WrappedComponent){return props=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(ActionSchedulerProvider,null,(schedule=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(WrappedComponent,_extends({},props,{schedule}))))}ActionSchedulerProvider.displayName="ActionSchedulerProvider";const useUpdatingRef=value=>{const ref=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(value);return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{ref.current=value}),[value]),ref};function useInterval(action,intervalMs,active){const actionRef=useUpdatingRef(action);(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{if(active){const intervalId=setInterval((()=>{actionRef.current()}),intervalMs);return()=>{clearInterval(intervalId)}}}),[intervalMs,active,actionRef])}function useTimeout(action,timeoutMs,active){const actionRef=useUpdatingRef(action);(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{if(active){const timeoutId=setTimeout((()=>{actionRef.current()}),timeoutMs);return()=>{clearTimeout(timeoutId)}}}),[timeoutMs,active,actionRef])}function useScheduledInterval(action,intervalMs,options){var _options$schedulePoli;if("function"!=typeof action)throw new Error("Action must be a function");if(intervalMs<1)throw new Error("Interval period must be >= 1");const schedulePolicy=null!=(_options$schedulePoli=null==options?void 0:options.schedulePolicy)?_options$schedulePoli:SchedulePolicy.Immediately,[isSet,setIsSet]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(schedulePolicy===SchedulePolicy.Immediately),set=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((()=>setIsSet(!0)),[]),actionRef=useUpdatingRef(action),clear=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((policy=>{var _policy;policy=null!=(_policy=policy)?_policy:null==options?void 0:options.clearPolicy,isSet&&policy===ClearPolicy.Resolve&&actionRef.current(),setIsSet(!1)}),[actionRef,isSet,null==options?void 0:options.clearPolicy]),runOnUnmountRef=useUpdatingRef(isSet&&(null==options?void 0:options.clearPolicy)===ClearPolicy.Resolve);return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>()=>{runOnUnmountRef.current&&actionRef.current()}),[]),useInterval(action,intervalMs,isSet),{isSet,set,clear}}function useScheduledTimeout(action,timeoutMs,options){var _options$schedulePoli;if("function"!=typeof action)throw new Error("Action must be a function");if(timeoutMs<0)throw new Error("Timeout period must be >= 0");const schedulePolicy=null!=(_options$schedulePoli=null==options?void 0:options.schedulePolicy)?_options$schedulePoli:SchedulePolicy.Immediately,[isSet,setIsSet]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(schedulePolicy===SchedulePolicy.Immediately),set=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((()=>setIsSet(!0)),[]),wrappedAction=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((()=>{setIsSet(!1),action()}),[action]),actionRef=useUpdatingRef(wrappedAction),clear=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((policy=>{var _policy;policy=null!=(_policy=policy)?_policy:null==options?void 0:options.clearPolicy,isSet&&policy===ClearPolicy.Resolve&&actionRef.current(),setIsSet(!1)}),[actionRef,isSet,null==options?void 0:options.clearPolicy]),runOnUnmountRef=useUpdatingRef(isSet&&(null==options?void 0:options.clearPolicy)===ClearPolicy.Resolve);return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>()=>{runOnUnmountRef.current&&actionRef.current()}),[]),useTimeout(wrappedAction,timeoutMs,isSet),{isSet,set,clear}}ActionSchedulerProvider.__docgenInfo={description:"",methods:[],displayName:"ActionSchedulerProvider"}},"./__docs__/wonder-blocks-timing/with-action-scheduler.stories.mdx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{CorrectUsage:()=>CorrectUsage,IncorrectUsage:()=>IncorrectUsage,correctUsage:()=>correctUsage,default:()=>with_action_scheduler_stories,incorrectUsage:()=>incorrectUsage});var react=__webpack_require__("./node_modules/react/index.js"),lib=__webpack_require__("./node_modules/@mdx-js/react/lib/index.js"),dist=__webpack_require__("./node_modules/@storybook/blocks/dist/index.mjs"),es=__webpack_require__("./packages/wonder-blocks-core/dist/es/index.js");const package_namespaceObject=JSON.parse('{"u2":"@khanacademy/wonder-blocks-timing","i8":"4.0.1"}');var dist_es=__webpack_require__("./packages/wonder-blocks-button/dist/es/index.js"),wonder_blocks_timing_dist_es=__webpack_require__("./packages/wonder-blocks-timing/dist/es/index.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const Unmounter=function Unmounter(props){const[mountKids,setMountKids]=react.useState(!0);return(0,jsx_runtime.jsx)(es.G7,{children:mountKids?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(dist_es.Z,{onClick:()=>{setMountKids(!1)},children:"Unmount"}),props.children]}):"Children unmounted"})};Unmounter.displayName="Unmounter";class MyNaughtyComponent extends react.Component{componentDidMount(){const{targetId}=this.props;let counter=0;const domElement=document.getElementById(targetId);setInterval((()=>{domElement.innerText="Naughty interval logged: "+counter++}),200)}render(){return(0,jsx_runtime.jsx)(es.G7,{children:"NaughtyComponent here"})}}MyNaughtyComponent.displayName="MyNaughtyComponent";class MyGoodComponent extends react.Component{componentDidMount(){const{targetId,schedule}=this.props;let counter=0;const domElement=document.getElementById(targetId);schedule.interval((()=>{domElement.innerText="Naughty interval logged: "+counter++}),200)}render(){return(0,jsx_runtime.jsx)(es.G7,{children:"GoodComponent here"})}}MyGoodComponent.displayName="MyGoodComponent";const MyGoodComponentWithScheduler=(0,wonder_blocks_timing_dist_es.$K)(MyGoodComponent);try{Unmounter.displayName="Unmounter",Unmounter.__docgenInfo={description:"",displayName:"Unmounter",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["__docs__/wonder-blocks-timing/with-action-scheduler-examples.tsx#Unmounter"]={docgenInfo:Unmounter.__docgenInfo,name:"Unmounter",path:"__docs__/wonder-blocks-timing/with-action-scheduler-examples.tsx#Unmounter"})}catch(__react_docgen_typescript_loader_error){}try{MyNaughtyComponent.displayName="MyNaughtyComponent",MyNaughtyComponent.__docgenInfo={description:"",displayName:"MyNaughtyComponent",props:{targetId:{defaultValue:null,description:"",name:"targetId",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["__docs__/wonder-blocks-timing/with-action-scheduler-examples.tsx#MyNaughtyComponent"]={docgenInfo:MyNaughtyComponent.__docgenInfo,name:"MyNaughtyComponent",path:"__docs__/wonder-blocks-timing/with-action-scheduler-examples.tsx#MyNaughtyComponent"})}catch(__react_docgen_typescript_loader_error){}try{MyGoodComponent.displayName="MyGoodComponent",MyGoodComponent.__docgenInfo={description:"",displayName:"MyGoodComponent",props:{schedule:{defaultValue:null,description:"An instance of the `IScheduleActions` API to use for scheduling\nintervals, timeouts, and animation frame requests.",name:"schedule",required:!0,type:{name:"IScheduleActions"}},targetId:{defaultValue:null,description:"",name:"targetId",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["__docs__/wonder-blocks-timing/with-action-scheduler-examples.tsx#MyGoodComponent"]={docgenInfo:MyGoodComponent.__docgenInfo,name:"MyGoodComponent",path:"__docs__/wonder-blocks-timing/with-action-scheduler-examples.tsx#MyGoodComponent"})}catch(__react_docgen_typescript_loader_error){}try{MyGoodComponentWithScheduler.displayName="MyGoodComponentWithScheduler",MyGoodComponentWithScheduler.__docgenInfo={description:"",displayName:"MyGoodComponentWithScheduler",props:{targetId:{defaultValue:null,description:"",name:"targetId",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["__docs__/wonder-blocks-timing/with-action-scheduler-examples.tsx#MyGoodComponentWithScheduler"]={docgenInfo:MyGoodComponentWithScheduler.__docgenInfo,name:"MyGoodComponentWithScheduler",path:"__docs__/wonder-blocks-timing/with-action-scheduler-examples.tsx#MyGoodComponentWithScheduler"})}catch(__react_docgen_typescript_loader_error){}var component_info=__webpack_require__("./.storybook/components/component-info.tsx");const IncorrectUsage=()=>(0,jsx_runtime.jsx)(es.Uj,{id:"incorrect",children:id=>(0,jsx_runtime.jsxs)(es.G7,{children:[(0,jsx_runtime.jsx)(Unmounter,{children:(0,jsx_runtime.jsx)(MyNaughtyComponent,{targetId:id})}),(0,jsx_runtime.jsx)(es.G7,{id})]})}),CorrectUsage=()=>(0,jsx_runtime.jsx)(es.Uj,{id:"correct",children:id=>(0,jsx_runtime.jsxs)(es.G7,{children:[(0,jsx_runtime.jsx)(Unmounter,{children:(0,jsx_runtime.jsx)(MyGoodComponentWithScheduler,{targetId:id})}),(0,jsx_runtime.jsx)(es.G7,{id})]})});function _createMdxContent(props){const _components=Object.assign({h1:"h1",p:"p",a:"a",code:"code",h2:"h2",h3:"h3",pre:"pre"},(0,lib.ah)(),props.components);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(dist.h_,{title:"Timing / withActionScheduler",parameters:{previewTabs:{canvas:{hidden:!0}},viewMode:"docs",chromatic:{disableSnapshot:!0}},decorators:[Story=>(0,jsx_runtime.jsx)(es.G7,{children:Story()})]}),"\n",(0,jsx_runtime.jsx)(_components.h1,{id:"withactionsceduler",children:"withActionSceduler"}),"\n",(0,jsx_runtime.jsx)(component_info.Z,{name:package_namespaceObject.u2,version:package_namespaceObject.i8}),"\n",(0,jsx_runtime.jsxs)(_components.p,{children:["This is a higher order component (HOC) that attaches the given component to an\n",(0,jsx_runtime.jsx)(_components.a,{href:"#ischeduleactions",children:(0,jsx_runtime.jsx)(_components.code,{children:"IScheduleActions"})})," instance. Any actions scheduled will automatically be\ncleared on unmount. This allows for \"set it and forget it\" behavior that won't\nleave timers dangling when the component's lifecycle ends."]}),"\n",(0,jsx_runtime.jsxs)(_components.p,{children:["For more details on using this component and the ",(0,jsx_runtime.jsx)(_components.a,{href:"#ischeduleactions",children:(0,jsx_runtime.jsx)(_components.code,{children:"IScheduleActions"})})," interface,\nsee the ",(0,jsx_runtime.jsx)(_components.a,{href:"#timing-api-overview",children:"API overview"}),"."]}),"\n",(0,jsx_runtime.jsx)(_components.h2,{id:"typescript-types",children:"TypeScript Types"}),"\n",(0,jsx_runtime.jsxs)(_components.p,{children:["If you are using TypeScript typing, you can use the ",(0,jsx_runtime.jsx)(_components.code,{children:"WithActionSchedulerProps"})," type\nto build the props for the component that you will pass to the ",(0,jsx_runtime.jsx)(_components.code,{children:"withActionScheduler"}),"\nfunction by spreading the type into your component's ",(0,jsx_runtime.jsx)(_components.code,{children:"Props"})," type."]}),"\n",(0,jsx_runtime.jsxs)(_components.p,{children:["The added ",(0,jsx_runtime.jsx)(_components.code,{children:"schedule"})," prop is of type ",(0,jsx_runtime.jsx)(_components.a,{href:"#ischeduleactions",children:(0,jsx_runtime.jsx)(_components.code,{children:"IScheduleActions"})}),". This is what the\n",(0,jsx_runtime.jsx)(_components.code,{children:"withActionScheduler"})," function injects to your component."]}),"\n",(0,jsx_runtime.jsxs)(_components.p,{children:["The returned value from ",(0,jsx_runtime.jsx)(_components.code,{children:"withActionScheduler"})," is a React component with props of\ntype ",(0,jsx_runtime.jsx)(_components.code,{children:"TProps"}),"."]}),"\n",(0,jsx_runtime.jsxs)(_components.p,{children:["Access to the ",(0,jsx_runtime.jsx)(_components.a,{href:"/docs/timing-types-ischeduleactions--page",children:"timing API"})," is provided via the ",(0,jsx_runtime.jsx)(_components.code,{children:"withActionScheduler"})," higher order\ncomponent."]}),"\n",(0,jsx_runtime.jsx)(_components.h2,{id:"usage",children:"Usage"}),"\n",(0,jsx_runtime.jsx)(_components.h3,{id:"incorrect-usage",children:"Incorrect Usage"}),"\n",(0,jsx_runtime.jsxs)(_components.p,{children:["The following component, ",(0,jsx_runtime.jsx)(_components.code,{children:"MyNaughtyComponent"}),", will keep spamming our pretend\nlog even after it was unmounted."]}),"\n","\n",(0,jsx_runtime.jsx)(dist.Xz,{children:(0,jsx_runtime.jsx)(dist.oG,{name:"IncorrectUsage",children:(0,jsx_runtime.jsx)(IncorrectUsage,{})})}),"\n",(0,jsx_runtime.jsx)(_components.pre,{children:(0,jsx_runtime.jsx)(_components.code,{className:"language-jsx",children:'function Unmounter(props: {|children: React.Node|}): React.Node {\n    const [mountKids, setMountKids] = React.useState(true);\n\n    const maybeRenderKids = () => {\n        if (!mountKids) {\n            return "Children unmounted";\n        }\n\n        return (\n            <>\n                <Button\n                    onClick={() => {\n                        setMountKids(false);\n                    }}\n                >\n                    Unmount\n                </Button>\n                {props.children}\n            </>\n        );\n    };\n\n    return <View>{maybeRenderKids()}</View>;\n}\n\nclass MyNaughtyComponent extends React.Component<{|targetId: string|}> {\n    componentDidMount() {\n        const {targetId} = this.props;\n        let counter = 0;\n        const domElement: HTMLElement = (document.getElementById(\n            targetId,\n        ): any);\n\n        setInterval(() => {\n            domElement.innerText = "Naughty interval logged: " + counter++;\n        }, 200);\n    }\n\n    render(): React.Node {\n        return <View>NaughtyComponent here</View>;\n    }\n}\n\nconst IncorrectUsage = () => (\n    <IDProvider id="incorrect">\n        {(id) => (\n            <View>\n                <Unmounter>\n                    <MyNaughtyComponent targetId={id} />\n                </Unmounter>\n                <View id={id} />\n            </View>\n        )}\n    </IDProvider>\n);\n'})}),"\n",(0,jsx_runtime.jsx)(_components.h3,{id:"correct-usage",children:"Correct Usage"}),"\n",(0,jsx_runtime.jsxs)(_components.p,{children:["But if we use ",(0,jsx_runtime.jsx)(_components.code,{children:"withActionScheduler"})," and the ",(0,jsx_runtime.jsx)(_components.code,{children:"interval"})," method, everything is\nfine. Unmount the component, and the logging stops."]}),"\n","\n",(0,jsx_runtime.jsx)(dist.Xz,{children:(0,jsx_runtime.jsx)(dist.oG,{name:"CorrectUsage",children:(0,jsx_runtime.jsx)(CorrectUsage,{})})}),"\n",(0,jsx_runtime.jsx)(_components.pre,{children:(0,jsx_runtime.jsx)(_components.code,{className:"language-jsx",children:'import {withActionScheduler} from "@khanacademy/wonder-blocks-timing";\nimport type {\n    WithActionSchedulerProps,\n    WithoutActionScheduler,\n} from "@khanacademy/wonder-blocks-timing";\n\ntype Props = {|\n    ...WithActionSchedulerProps,\n    targetId: string,\n|};\n\nclass MyGoodComponent extends React.Component<Props> {\n    componentDidMount() {\n        const {targetId, schedule} = this.props;\n        let counter = 0;\n        const domElement: HTMLElement = (document.getElementById(\n            targetId,\n        ): any);\n\n        schedule.interval(() => {\n            domElement.innerText = "Naughty interval logged: " + counter++;\n        }, 200);\n    }\n\n    render(): React.Node {\n        return <View>GoodComponent here</View>;\n    }\n}\n\nconst MyGoodComponentWithScheduler: React.AbstractComponent<\n    WithoutActionScheduler<React.ElementConfig<typeof MyGoodComponent>>,\n    MyGoodComponent,\n> = withActionScheduler(MyGoodComponent);\n\n// This is the same as the previous example\nfunction Unmounter(props: {|children: React.Node|}): React.Node {\n    ...\n}\n\nconst CorrectUsage = () => (\n    <IDProvider id="correct">\n        {(id) => (\n            <View>\n                <Unmounter>\n                    <MyGoodComponentWithScheduler targetId={id} />\n                </Unmounter>\n                <View id={id} />\n            </View>\n        )}\n    </IDProvider>\n);\n'})})]})}const incorrectUsage=()=>(0,jsx_runtime.jsx)(IncorrectUsage,{});incorrectUsage.storyName="IncorrectUsage",incorrectUsage.parameters={storySource:{source:"<IncorrectUsage />"}};const correctUsage=()=>(0,jsx_runtime.jsx)(CorrectUsage,{});correctUsage.storyName="CorrectUsage",correctUsage.parameters={storySource:{source:"<CorrectUsage />"}};const componentMeta={title:"Timing / withActionScheduler",parameters:{previewTabs:{canvas:{hidden:!0}},viewMode:"docs",chromatic:{disableSnapshot:!0}},decorators:[Story=>(0,jsx_runtime.jsx)(es.G7,{children:Story()})],tags:["stories-mdx"],includeStories:["incorrectUsage","correctUsage"]};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs={...componentMeta.parameters.docs||{},page:function MDXContent(props={}){const{wrapper:MDXLayout}=Object.assign({},(0,lib.ah)(),props.components);return MDXLayout?(0,jsx_runtime.jsx)(MDXLayout,{...props,children:(0,jsx_runtime.jsx)(_createMdxContent,{...props})}):_createMdxContent(props)}};const with_action_scheduler_stories=componentMeta},"./node_modules/react/cjs/react-jsx-runtime.production.min.js":(__unused_webpack_module,exports,__webpack_require__)=>{var f=__webpack_require__("./node_modules/react/index.js"),g=60103;if(exports.Fragment=60107,"function"==typeof Symbol&&Symbol.for){var h=Symbol.for;g=h("react.element"),exports.Fragment=h("react.fragment")}var m=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,n=Object.prototype.hasOwnProperty,p={key:!0,ref:!0,__self:!0,__source:!0};function q(c,a,k){var b,d={},e=null,l=null;for(b in void 0!==k&&(e=""+k),void 0!==a.key&&(e=""+a.key),void 0!==a.ref&&(l=a.ref),a)n.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:g,type:c,key:e,ref:l,props:d,_owner:m.current}}exports.jsx=q,exports.jsxs=q},"./node_modules/react/jsx-runtime.js":(module,__unused_webpack_exports,__webpack_require__)=>{module.exports=__webpack_require__("./node_modules/react/cjs/react-jsx-runtime.production.min.js")}}]);