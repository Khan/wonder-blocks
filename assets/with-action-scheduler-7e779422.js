import{a as s}from"./jsx-runtime-309e447d.js";import{r as h}from"./index-9f32f44c.js";const c={Immediately:"schedule-immediately",OnDemand:"schedule-on-demand"},r={Resolve:"resolve-on-clear",Cancel:"cancel-on-clear"};class u{constructor(t,e,i=c.Immediately){if(typeof t!="function")throw new Error("Action must be a function");if(e<0)throw new Error("Timeout period must be >= 0");this._action=t,this._timeoutMs=e,i===c.Immediately&&this.set()}get isSet(){return this._timeoutId!=null}set(){this.isSet&&this.clear(r.Cancel),this._timeoutId=setTimeout(()=>this.clear(r.Resolve),this._timeoutMs)}clear(t=r.Cancel){const e=this._timeoutId;this._timeoutId=null,e!=null&&(clearTimeout(e),t===r.Resolve&&this._action())}}class d{constructor(t,e,i=c.Immediately){if(typeof t!="function")throw new Error("Action must be a function");if(e<1)throw new Error("Interval period must be >= 1");this._action=t,this._intervalMs=e,i===c.Immediately&&this.set()}get isSet(){return this._intervalId!=null}set(){this.isSet&&this.clear(r.Cancel),this._intervalId=setInterval(()=>this._action(),this._intervalMs)}clear(t=r.Cancel){const e=this._intervalId;this._intervalId=null,e!=null&&(clearInterval(e),t===r.Resolve&&this._action())}}class m{constructor(t,e=c.Immediately){if(typeof t!="function")throw new Error("Action must be a function");this._action=t,e===c.Immediately&&this.set()}get isSet(){return this._animationFrameId!=null}set(){this.isSet&&this.clear(r.Cancel),this._animationFrameId=requestAnimationFrame(t=>this.clear(r.Resolve,t))}clear(t=r.Cancel,e){const i=this._animationFrameId;this._animationFrameId=null,i!=null&&(cancelAnimationFrame(i),t===r.Resolve&&this._action(e||performance.now()))}}const o=class l{constructor(){this._disabled=!1,this._registeredActions=[]}timeout(t,e,i){if(this._disabled)return l.NoopAction;const a=new u(t,e,i==null?void 0:i.schedulePolicy);return this._registeredActions.push(()=>a.clear(i==null?void 0:i.clearPolicy)),a}interval(t,e,i){if(this._disabled)return l.NoopAction;const a=new d(t,e,i==null?void 0:i.schedulePolicy);return this._registeredActions.push(()=>a.clear(i==null?void 0:i.clearPolicy)),a}animationFrame(t,e){if(this._disabled)return l.NoopAction;const i=new m(t,e==null?void 0:e.schedulePolicy);return this._registeredActions.push(()=>i.clear(e==null?void 0:e.clearPolicy)),i}clearAll(){const t=[...this._registeredActions];this._registeredActions=[],t.forEach(e=>e())}disable(){this._disabled=!0,this.clearAll()}};o.NoopAction={set:()=>{},get isSet(){return!1},clear:()=>{}};let _=o;class f extends h.Component{constructor(){super(...arguments),this._actionScheduler=new _}componentWillUnmount(){this._actionScheduler.disable()}render(){const{children:t}=this.props;return t(this._actionScheduler)}}function y(n){return t=>s(f,{children:e=>s(n,{...t,schedule:e})})}try{withactionscheduler.displayName="withactionscheduler",withactionscheduler.__docgenInfo={description:"A higher order component that attaches the given component to an\n`IScheduleActions` instance. Any actions scheduled will automatically be\ncleared on unmount.",displayName:"withactionscheduler",props:{}}}catch{}export{r as C,c as S,y as w};
//# sourceMappingURL=with-action-scheduler-7e779422.js.map
