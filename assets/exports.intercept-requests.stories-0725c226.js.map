{"version":3,"file":"exports.intercept-requests.stories-0725c226.js","sources":["../../__docs__/wonder-blocks-data/exports.intercept-requests.stories.mdx"],"sourcesContent":["import {Meta} from \"@storybook/blocks\";\nimport {InterceptRequests} from \"@khanacademy/wonder-blocks-data\";\n\n<Meta\n    title=\"Data / Exports / InterceptRequests\"\n    component={InterceptRequests}\n    parameters={{\n        chromatic: {\n            disableSnapshot: true,\n        },\n    }}\n/>\n\n# InterceptRequests\n\nWhen you want to generate tests that check the loading state and\nsubsequent loaded state are working correctly for your uses of `Data` you can\nuse the `InterceptRequests` component. You can also use this component to\nregister request interceptors for any code that uses the `useRequestInterception`\nhook.\n\nThis component takes the children to be rendered, and an interceptor function.\n\nNote that this component is expected to be used only within test cases or\nstories. Be careful want request IDs are matched to avoid intercepting the\nwrong requests and remember that in-flight requests for a given request ID\ncan be shared - which means a bad request ID match could share requests across\ndifferent request IDs..\n\nThe `interceptor` intercept function has the form:\n\n```js static\n(requestId: string) => ?Promise<TData>;\n```\n\nIf this method returns `null`, then the next interceptor in the chain is\ninvoked, ultimately ending with the original handler. This\nmeans that a request will be made for data via the handler assigned to the\n`Data` component being intercepted if no interceptor handles the request first.\n\n```jsx\nimport {Body, BodyMonospace} from \"@khanacademy/wonder-blocks-typography\";\nimport {View} from \"@khanacademy/wonder-blocks-core\";\nimport {InterceptRequests, Data} from \"@khanacademy/wonder-blocks-data\";\nimport {Strut} from \"@khanacademy/wonder-blocks-layout\";\nimport Color from \"@khanacademy/wonder-blocks-color\";\nimport Spacing from \"@khanacademy/wonder-blocks-spacing\";\n\nconst myHandler = () => Promise.reject(new Error(\"You should not see this!\"));\n\nconst interceptor = (requestId) =>\n    requestId === \"INTERCEPT_EXAMPLE\"\n        ? Promise.resolve(\"INTERCEPTED DATA!\")\n        : null;\n\n<InterceptRequests interceptor={interceptor}>\n    <View>\n        <Body>This received intercepted data!</Body>\n        <Data handler={myHandler} requestId=\"INTERCEPT_EXAMPLE\">\n            {(result) => {\n                if (result.status !== \"success\") {\n                    return \"If you see this, the example is broken!\";\n                }\n\n                return <BodyMonospace>{result.data}</BodyMonospace>;\n            }}\n        </Data>\n    </View>\n</InterceptRequests>;\n```\n"],"names":["_createMdxContent","props","_components","_provideComponents","_jsxs","_Fragment","_jsx","Meta","InterceptRequests","MDXContent","MDXLayout","__page","componentMeta","__namedExportsOrder"],"mappings":"qoBAMA,SAASA,EAAkBC,EAAO,CAChC,MAAMC,EAAc,OAAO,OAAO,CAChC,GAAI,KACJ,EAAG,IACH,KAAM,OACN,IAAK,KACN,EAAEC,EAAoB,EAAEF,EAAM,UAAU,EACzC,OAAoBG,EAAMC,EAAW,CACnC,SAAU,CAAcC,EAAKC,EAAM,CACjC,MAAO,qCACP,UAAWC,EACX,WAAY,CACV,UAAW,CACT,gBAAiB,EAClB,CACF,CACF,CAAA,EAAG;AAAA,EAAmBF,EAAKJ,EAAY,GAAI,CAC1C,GAAI,oBACJ,SAAU,mBACX,CAAA,EAAG;AAAA,EAAmBE,EAAMF,EAAY,EAAG,CAC1C,SAAU,CAAC;AAAA,iEAAkJI,EAAKJ,EAAY,KAAM,CAClL,SAAU,MACX,CAAA,EAAG;AAAA,UAAmCI,EAAKJ,EAAY,KAAM,CAC5D,SAAU,mBACX,CAAA,EAAG;AAAA,2DAA0HI,EAAKJ,EAAY,KAAM,CACnJ,SAAU,wBACX,CAAA,EAAG;AAAA,MAAS,CACd,CAAA,EAAG;AAAA,EAAmBI,EAAKJ,EAAY,EAAG,CACzC,SAAU,gFACX,CAAA,EAAG;AAAA,EAAmBI,EAAKJ,EAAY,EAAG,CACzC,SAAU;AAAA;AAAA;AAAA;AAAA,wBACX,CAAA,EAAG;AAAA,EAAmBE,EAAMF,EAAY,EAAG,CAC1C,SAAU,CAAC,OAAqBI,EAAKJ,EAAY,KAAM,CACrD,SAAU,aACX,CAAA,EAAG,mCAAmC,CACxC,CAAA,EAAG;AAAA,EAAmBI,EAAKJ,EAAY,IAAK,CAC3C,SAAuBI,EAAKJ,EAAY,KAAM,CAC5C,UAAW,cACX,SAAU;AAAA,CAClB,CAAO,CACF,CAAA,EAAG;AAAA,EAAmBE,EAAMF,EAAY,EAAG,CAC1C,SAAU,CAAC,0BAAwCI,EAAKJ,EAAY,KAAM,CACxE,SAAU,MACX,CAAA,EAAG;AAAA;AAAA;AAAA,EAAsMI,EAAKJ,EAAY,KAAM,CAC/N,SAAU,MACX,CAAA,EAAG,2EAA2E,CAChF,CAAA,EAAG;AAAA,EAAmBI,EAAKJ,EAAY,IAAK,CAC3C,SAAuBI,EAAKJ,EAAY,KAAM,CAC5C,UAAW,eACX,SAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAClB,CAAO,CACP,CAAK,CAAC,CACN,CAAG,CACH,CACA,SAASO,EAAWR,EAAQ,GAAI,CAC9B,KAAM,CACJ,QAASS,CACb,EAAM,OAAO,OAAO,CAAE,EAAEP,EAAkB,EAAIF,EAAM,UAAU,EAC5D,OAAOS,EAAyBJ,EAAKI,EAAW,CAC9C,GAAGT,EACH,SAAuBK,EAAKN,EAAmB,CAC7C,GAAGC,CACT,CAAK,CACL,CAAG,EAAID,EAAkBC,CAAK,CAC9B,CAEY,MAACU,EAAS,IAAM,CAC1B,MAAM,IAAI,MAAM,iBAAiB,CACnC,EACAA,EAAO,WAAa,CAClB,SAAU,EACZ,EACK,MAACC,EAAgB,CACpB,MAAO,qCACP,WAAY,CACV,UAAW,CACT,gBAAiB,EAClB,CACF,EACD,UAAWJ,EACX,KAAM,CAAC,aAAa,EACpB,eAAgB,CAAC,QAAQ,CAC3B,EACAI,EAAc,WAAaA,EAAc,YAAc,GACvDA,EAAc,WAAW,KAAO,CAC9B,GAAIA,EAAc,WAAW,MAAQ,GACrC,KAAMH,CACR,EAC4B,MAAAI,EAAA,CAAA,QAAA"}