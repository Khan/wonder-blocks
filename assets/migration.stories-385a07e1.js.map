{"version":3,"file":"migration.stories-385a07e1.js","sources":["../../__docs__/wonder-blocks-timing/migration.stories.mdx"],"sourcesContent":["import {Meta} from \"@storybook/blocks\";\n\n<Meta\n    title=\"Timing / withActionScheduler / Migration from standard API\"\n    parameters={{\n        chromatic: {\n            disableSnapshot: true,\n        },\n    }}\n/>\n\n# withActionSceduler\n\n## Migration from standard API\n\nMigrating from the standard API can be done by:\n\n1. Wrapping your component with the `withActionScheduler` HOC (and, if using TypeScript, using the\n   `WithActionSchedulerProps` type to extend your components props by spreading the type into\n   your component's `Props` type)\n2. Using the new `schedule` prop in your component instead of `setTimeout`, `setInterval` and `requestAnimationFrame`\n\n### Migration Example\n\nLet's imagine we have a component that uses `setTimeout` like this:\n\n```js static\ntype Props = {||};\n\ntype State = {\n    timerFired: boolean,\n}\n\nclass MyLegacyComponent extends React.Component<Props, State> {\n    _timeoutID: TimeoutID;\n\n    state: State = {\n        timerFired: false;\n    };\n\n    componentDidMount() {\n        this.timeoutID = setTimeout(\n            () => this.setState({timerFired: true}),\n            2000,\n        );\n    }\n\n    componentWillUnmount() {\n        /* 0 is a valid ID for a timeout */\n        if (this.timeoutID != null) {\n            clearTimeout(this.timeoutID);\n        }\n    }\n\n    renderState() {\n        const {timerFired} = this.state;\n        if (timerFired) {\n            return \"...fired!\";\n        }\n        return \"pending...\";\n    }\n\n    render() {\n        return <View>Legacy Component {this.renderState()}</View>;\n    }\n}\n```\n\nWe can rewrite it to use the Wonder Blocks Timing API like this:\n\n```js static\ntype Props = {|\n    /**\n     * These props will be injected into your component.  They won't appear\n     * as part of the public props of the component since `withActionSceduler`\n     * will excluding them from the props of the component it returns.\n     */\n    ...withActionSchedulerProps\n|};\n\ntype State = {\n    timerFired: boolean,\n}\n\nclass MyWonderBlocksComponentImpl extends React.Component<Props, State> {\n    state: State = {\n        timerFired: false;\n    };\n\n    componentDidMount() {\n        const {schedule} = this.props;\n        schedule.timeout(() => this.setState({timerFired: true}), 2000);\n    }\n\n    renderState() {\n        const {timerFired} = this.state;\n        if (timerFired) {\n            return \"...fired!\";\n        }\n        return \"pending...\";\n    }\n\n    render() {\n        return <View>Wonder Blocks Component {this.renderState()}</View>;\n    }\n}\n\n/**\n * The component that you would export as a drop-in replacement for your\n * legacy component.\n */\nconst MyWonderBlocksComponent = withActionScheduler(MyWonderBlocksComponentImpl);\n```\n"],"names":["_createMdxContent","props","_components","_provideComponents","_jsxs","_Fragment","_jsx","Meta","MDXContent","MDXLayout","__page","componentMeta","__namedExportsOrder"],"mappings":"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"}