{"version":3,"file":"checkbox-accessibility.stories-233d1333.js","sources":["../../__docs__/wonder-blocks-form/checkbox-accessibility.stories.mdx"],"sourcesContent":["import {Meta, Story, Canvas} from \"@storybook/blocks\";\nimport {StyleSheet} from \"aphrodite\";\n\nimport Color from \"@khanacademy/wonder-blocks-color\";\nimport {View} from \"@khanacademy/wonder-blocks-core\";\nimport {Checkbox} from \"@khanacademy/wonder-blocks-form\";\nimport {LabelSmall} from \"@khanacademy/wonder-blocks-typography\";\n\n<Meta\n    title=\"Form/Checkbox/Accessibility\"\n    component={Checkbox}\n    parameters={{\n        previewTabs: {\n            canvas: {hidden: true},\n        },\n        viewMode: \"docs\",\n        chromatic: {\n            // Disables chromatic testing for these stories.\n            disableSnapshot: true,\n        },\n    }}\n/>\n\nexport const ErrorTemplate = (args) => {\n    const [checked, setChecked] = React.useState(false);\n    const errorState = !checked;\n    return (\n        <View>\n            <Checkbox\n                checked={checked}\n                onChange={setChecked}\n                error={errorState}\n                aria-describedby={errorState && \"error-message\"}\n                aria-required={true}\n                {...args}\n            />\n            {errorState && (\n                <LabelSmall style={styles.error} id=\"error-message\">\n                    You must agree to the terms to continue\n                </LabelSmall>\n            )}\n        </View>\n    );\n};\n\nexport const DisabledTemplate = (args) => {\n    const [checked, setChecked] = React.useState(false);\n    const errorState = !checked;\n    return (\n        <Checkbox\n            checked={checked}\n            onChange={setChecked}\n            label=\"Some setting\"\n            description=\"You do not have permission to change this setting\"\n            disabled={true}\n        />\n    );\n};\n\n## Accessibility\n\n### ARIA\n\n`Checkbox` can take in all ARIA props defined in Wonder Blocks Core types.\n\nElements with role `\"checkbox\"` can have an `aria-checked` property that\nexposes the checked state to assistive technology. The dev does not have\nto worry about this because the Wonder Blocks Checkbox component is an\n`input` element with type `\"checkbox\"`, as this has built-in semantics and\ndoes not require ARIA.\n\nThe current implementation of `Checkbox` uses `aria-describedby` with the\nlabel and description that may be passed in as props.\n\nSee the Error section for information about `aria-invalid` and\n`aria-required`.\n\n### Error state\n\nThe Wonder Blocks `Checkbox` component takes an `error` boolean prop. Setting\nthis prop to true will set `aria-invalid` to true, and the color of the\ncheckbox to red.\n\nWhen a form input is invalid, the user should provide a reason for why\nthis is.\n\nGenerally, it is also suggested this is the validation error message is\npassed to the checkbox's `aria-describedby` prop so assistive tech can\nread it. However, this is not possible with the current implementation of\nthe Wonder Blocks Form Checkbox component.\n\nThe error state can be used to signal that a required checkbox has not been\nchecked. In cases where a checkbox is required, the checkbox component should\nset the `aria-required` prop to true for assistive tech.\nThere should also be some sort of visual indication that checking\nthe box is required, such as a \"Required\" label or an asterisk.\n\n<Canvas>\n    <Story\n        name=\"Error state\"\n        args={{\n            label: \"I accept the terms and conditions\",\n        }}\n    >\n        {ErrorTemplate.bind({})}\n    </Story>\n</Canvas>\n\n### Disabled state\n\nThe Wonder Blocks `Checkbox` compoenent takes a `disabled` boolean prop.\nThis sets the underlying `input` element's `disabled` prop to `true`.\nThis makes is so that the checkbox is not interactable. Also, assistive\ntech will indicated that the checkbox is dimmed.\n\nA user will not be able to navigate to the checkbox with a keyboard.\nScreen reader users will be able to navigate to the checkbox with\nscreen reader controls.\n\nIt is suggested that if an element is disabled, an explanation as to why\nshould to provided somewhere.\n\n<Canvas>\n    <Story name=\"Disabled state\">{DisabledTemplate.bind({})}</Story>\n</Canvas>\n\n### Keyboard Interaction\n\nIf a checkbox is not disabled, a user can tab to it using standard\nkeyboard navigation. The Space key toggles the checked state of the checkbox.\n\nNote the the Space key triggers the `onChange` function of the\nWonder Blocks Checkbox component. If the user does not specify an `onChange`\nfunciton prop that in turn updates the value of `checked`, neither clicking\nnor the Space key will toggle the Checkbox.\n\n### References\n\n-   [Accessible validation of checkbox and radiobutton groups](https://blog.tenon.io/accessible-validation-of-checkbox-and-radiobutton-groups/)\n-   [HTML: Validating a checkbox with HTML5](https://www.the-art-of-web.com/html/html5-checkbox-required/#example1)\n-   [aria-checked MDN Docs](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Attributes/aria-checked)\n-   [ARIA: checkbox role MDN Docs](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Roles/checkbox_role)\n\nexport const styles = StyleSheet.create({\n    error: {\n        color: Color.red,\n    },\n});\n"],"names":["ErrorTemplate","args","checked","setChecked","errorState","_jsxs","View","_jsx","Checkbox","LabelSmall","styles","DisabledTemplate","StyleSheet","Color","_createMdxContent","props","_components","_provideComponents","_Fragment","Meta","Canvas","Story","MDXContent","MDXLayout","disabledState","componentMeta","__namedExportsOrder"],"mappings":"o1BAWY,MAACA,EAAgBC,GAAQ,CACnC,KAAM,CAACC,EAASC,CAAU,EAAI,MAAM,SAAS,EAAK,EAC5CC,EAAa,CAACF,EACpB,OAAoBG,EAAMC,EAAM,CAC9B,SAAU,CAAcC,EAAKC,EAAU,CACrC,QAASN,EACT,SAAUC,EACV,MAAOC,EACP,mBAAoBA,GAAc,gBAClC,gBAAiB,GACjB,GAAGH,CACT,CAAK,EAAGG,GAA2BG,EAAKE,EAAY,CAC9C,MAAOC,EAAO,MACd,GAAI,gBACJ,SAAU,yCAChB,CAAK,CAAC,CACN,CAAG,CACH,EACaC,EAAmBV,GAAQ,CACtC,KAAM,CAACC,EAASC,CAAU,EAAI,MAAM,SAAS,EAAK,EAElD,OAAoBI,EAAKC,EAAU,CACjC,QAASN,EACT,SAAUC,EACV,MAAO,eACP,YAAa,oDACb,SAAU,EACd,CAAG,CACH,EACaO,EAASE,EAAU,WAAC,OAAO,CACtC,MAAO,CACL,MAAOC,EAAM,GACd,CACH,CAAC,EACD,SAASC,EAAkBC,EAAO,CAChC,MAAMC,EAAc,OAAO,OAAO,CAChC,GAAI,KACJ,GAAI,KACJ,EAAG,IACH,KAAM,OACN,GAAI,KACJ,GAAI,KACJ,EAAG,GACJ,EAAEC,EAAoB,EAAEF,EAAM,UAAU,EACzC,OAAoBV,EAAMa,EAAW,CACnC,SAAU,CAAcX,EAAKY,EAAM,CACjC,MAAO,8BACP,UAAWX,EACX,WAAY,CACV,YAAa,CACX,OAAQ,CACN,OAAQ,EACT,CACF,EACD,SAAU,OACV,UAAW,CAET,gBAAiB,EAClB,CACF,CACP,CAAK,EAAG;AAAA,EAAM;AAAA,EAAM;AAAA,EAAmBD,EAAKS,EAAY,GAAI,CACtD,GAAI,gBACJ,SAAU,eACX,CAAA,EAAG;AAAA,EAAmBT,EAAKS,EAAY,GAAI,CAC1C,GAAI,OACJ,SAAU,MACX,CAAA,EAAG;AAAA,EAAmBX,EAAMW,EAAY,EAAG,CAC1C,SAAU,CAAcT,EAAKS,EAAY,KAAM,CAC7C,SAAU,UACX,CAAA,EAAG,kEAAkE,CACvE,CAAA,EAAG;AAAA,EAAmBX,EAAMW,EAAY,EAAG,CAC1C,SAAU,CAAC,sBAAoCT,EAAKS,EAAY,KAAM,CACpE,SAAU,YACX,CAAA,EAAG,gBAA8BT,EAAKS,EAAY,KAAM,CACvD,SAAU,cACX,CAAA,EAAG;AAAA;AAAA;AAAA,EAAmLT,EAAKS,EAAY,KAAM,CAC5M,SAAU,OACX,CAAA,EAAG,sBAAoCT,EAAKS,EAAY,KAAM,CAC7D,SAAU,YACX,CAAA,EAAG;AAAA,uBAA8D,CACnE,CAAA,EAAG;AAAA,EAAmBX,EAAMW,EAAY,EAAG,CAC1C,SAAU,CAAC,iCAA+CT,EAAKS,EAAY,KAAM,CAC/E,SAAU,UACX,CAAA,EAAG,SAAuBT,EAAKS,EAAY,KAAM,CAChD,SAAU,kBACX,CAAA,EAAG;AAAA,sDAAkE,CACvE,CAAA,EAAG;AAAA,EAAmBX,EAAMW,EAAY,EAAG,CAC1C,SAAU,CAAC,+CAA6DT,EAAKS,EAAY,KAAM,CAC7F,SAAU,cACX,CAAA,EAAG;AAAA,EAAuBT,EAAKS,EAAY,KAAM,CAChD,SAAU,eACX,CAAA,EAAG,GAAG,CACR,CAAA,EAAG;AAAA,EAAmBT,EAAKS,EAAY,GAAI,CAC1C,GAAI,cACJ,SAAU,aACX,CAAA,EAAG;AAAA,EAAmBX,EAAMW,EAAY,EAAG,CAC1C,SAAU,CAAC,qBAAmCT,EAAKS,EAAY,KAAM,CACnE,SAAU,UACX,CAAA,EAAG,uBAAqCT,EAAKS,EAAY,KAAM,CAC9D,SAAU,OACX,CAAA,EAAG;AAAA,6BAAoET,EAAKS,EAAY,KAAM,CAC7F,SAAU,cACX,CAAA,EAAG;AAAA,iBAAkD,CACvD,CAAA,EAAG;AAAA,EAAmBT,EAAKS,EAAY,EAAG,CACzC,SAAU;AAAA,SACX,CAAA,EAAG;AAAA,EAAmBX,EAAMW,EAAY,EAAG,CAC1C,SAAU,CAAC;AAAA,2BAAmHT,EAAKS,EAAY,KAAM,CACnJ,SAAU,kBACX,CAAA,EAAG;AAAA;AAAA,2CAAoJ,CACzJ,CAAA,EAAG;AAAA,EAAmBX,EAAMW,EAAY,EAAG,CAC1C,SAAU,CAAC;AAAA;AAAA,UAAqLT,EAAKS,EAAY,KAAM,CACrN,SAAU,eACX,CAAA,EAAG;AAAA;AAAA,gEAAyK,CACnL,CAAK,EAAG;AAAA,EAAmBT,EAAKa,EAAQ,CAClC,SAAuBb,EAAKc,EAAO,CACjC,KAAM,cACN,KAAM,CACJ,MAAO,mCACR,EACD,SAAUrB,EAAc,KAAK,EAAE,CACvC,CAAO,CACF,CAAA,EAAG;AAAA,EAAmBO,EAAKS,EAAY,GAAI,CAC1C,GAAI,iBACJ,SAAU,gBACX,CAAA,EAAG;AAAA,EAAmBX,EAAMW,EAAY,EAAG,CAC1C,SAAU,CAAC,qBAAmCT,EAAKS,EAAY,KAAM,CACnE,SAAU,UACX,CAAA,EAAG,uBAAqCT,EAAKS,EAAY,KAAM,CAC9D,SAAU,UACX,CAAA,EAAG;AAAA,2BAA0DT,EAAKS,EAAY,KAAM,CACnF,SAAU,OACX,CAAA,EAAG,cAA4BT,EAAKS,EAAY,KAAM,CACrD,SAAU,UACX,CAAA,EAAG,YAA0BT,EAAKS,EAAY,KAAM,CACnD,SAAU,MACX,CAAA,EAAG;AAAA;AAAA,iDAA8H,CACnI,CAAA,EAAG;AAAA,EAAmBT,EAAKS,EAAY,EAAG,CACzC,SAAU;AAAA;AAAA,wBACX,CAAA,EAAG;AAAA,EAAmBT,EAAKS,EAAY,EAAG,CACzC,SAAU;AAAA,8BAChB,CAAK,EAAG;AAAA,EAAmBT,EAAKa,EAAQ,CAClC,SAAuBb,EAAKc,EAAO,CACjC,KAAM,iBACN,SAAUV,EAAiB,KAAK,EAAE,CAC1C,CAAO,CACF,CAAA,EAAG;AAAA,EAAmBJ,EAAKS,EAAY,GAAI,CAC1C,GAAI,uBACJ,SAAU,sBACX,CAAA,EAAG;AAAA,EAAmBT,EAAKS,EAAY,EAAG,CACzC,SAAU;AAAA,8EACX,CAAA,EAAG;AAAA,EAAmBX,EAAMW,EAAY,EAAG,CAC1C,SAAU,CAAC,uCAAqDT,EAAKS,EAAY,KAAM,CACrF,SAAU,UACX,CAAA,EAAG;AAAA,oEAAqGT,EAAKS,EAAY,KAAM,CAC9H,SAAU,UACX,CAAA,EAAG;AAAA,kDAAmET,EAAKS,EAAY,KAAM,CAC5F,SAAU,SACX,CAAA,EAAG;AAAA,4CAAiE,CACtE,CAAA,EAAG;AAAA,EAAmBT,EAAKS,EAAY,GAAI,CAC1C,GAAI,aACJ,SAAU,YACX,CAAA,EAAG;AAAA,EAAmBX,EAAMW,EAAY,GAAI,CAC3C,SAAU,CAAC;AAAA,EAAmBT,EAAKS,EAAY,GAAI,CACjD,SAAuBT,EAAKS,EAAY,EAAG,CACzC,KAAM,kFACN,OAAQ,SACR,IAAK,+BACL,SAAU,0DACpB,CAAS,CACF,CAAA,EAAG;AAAA,EAAmBT,EAAKS,EAAY,GAAI,CAC1C,SAAuBT,EAAKS,EAAY,EAAG,CACzC,KAAM,wEACN,OAAQ,SACR,IAAK,+BACL,SAAU,wCACpB,CAAS,CACF,CAAA,EAAG;AAAA,EAAmBT,EAAKS,EAAY,GAAI,CAC1C,SAAuBT,EAAKS,EAAY,EAAG,CACzC,KAAM,0FACN,OAAQ,SACR,IAAK,+BACL,SAAU,uBACpB,CAAS,CACF,CAAA,EAAG;AAAA,EAAmBT,EAAKS,EAAY,GAAI,CAC1C,SAAuBT,EAAKS,EAAY,EAAG,CACzC,KAAM,sFACN,OAAQ,SACR,IAAK,+BACL,SAAU,8BACpB,CAAS,CACF,CAAA,EAAG;AAAA,CAAI,CACd,CAAK,CAAC,CACN,CAAG,CACH,CACA,SAASM,EAAWP,EAAQ,GAAI,CAC9B,KAAM,CACJ,QAASQ,CACb,EAAM,OAAO,OAAO,CAAE,EAAEN,EAAkB,EAAIF,EAAM,UAAU,EAC5D,OAAOQ,EAAyBhB,EAAKgB,EAAW,CAC9C,GAAGR,EACH,SAAuBR,EAAKO,EAAmB,CAC7C,GAAGC,CACT,CAAK,CACL,CAAG,EAAID,EAAkBC,CAAK,CAC9B,CAEY,MAACX,EAAaJ,EAAc,KAAK,EAAE,EAC/CI,EAAW,UAAY,cACvBA,EAAW,KAAO,CAChB,MAAO,mCACT,EACAA,EAAW,WAAa,CACtB,YAAa,CACX,OAAQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EACT,CACH,EACY,MAACoB,EAAgBb,EAAiB,KAAK,EAAE,EACrDa,EAAc,UAAY,iBAC1BA,EAAc,WAAa,CACzB,YAAa,CACX,OAAQ;AAAA;AAAA;AAAA;AAAA,EACT,CACH,EACK,MAACC,EAAgB,CACpB,MAAO,8BACP,WAAY,CACV,YAAa,CACX,OAAQ,CACN,OAAQ,EACT,CACF,EACD,SAAU,OACV,UAAW,CAET,gBAAiB,EAClB,CACF,EACD,UAAWjB,EACX,KAAM,CAAC,aAAa,EACpB,eAAgB,CAAC,aAAc,eAAe,CAChD,EACAiB,EAAc,WAAaA,EAAc,YAAc,GACvDA,EAAc,WAAW,KAAO,CAC9B,GAAIA,EAAc,WAAW,MAAQ,GACrC,KAAMH,CACR,EAC4B,MAAAI,EAAA,CAAA,gBAAA,mBAAA,SAAA,aAAA,eAAA"}