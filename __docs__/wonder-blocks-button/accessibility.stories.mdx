import {Meta, Story, Canvas} from "@storybook/addon-docs";
import {StyleSheet} from "aphrodite";

import Button from "@khanacademy/wonder-blocks-button";
import {View} from "@khanacademy/wonder-blocks-core";

<Meta
    title="Button / Accessibility"
    component={Button}
    parameters={{
        previewTabs: {
            canvas: {hidden: true},
        },
        viewMode: "docs",
        chromatic: {
            // Disables chromatic testing for these stories.
            disableSnapshot: true,
        },
    }}
/>

export const Template = (args) => <Button {...args} />;

## Accessibility

### Labeling

`Button` has an accessible label by default. The accessible name is computed from
the `children` prop. However, `aria-label` should be used when `spinner={true}`
to let people using screen readers that the action taken by clicking the button
will take some time to complete.

This is an example of a component with an accessible label:

<Canvas>
    <Story name="Labeling">
        <View>
            <Button spinner={true} aria-label="The action is being saved...">
                Label
            </Button>
        </View>
    </Story>
</Canvas>

### Disabled state

Buttons do not need an `aria-disabled` attribute, if it also has a `disabled`
attribute. Users operating the web page through a screen reader may not be able
to fully evaluate the implied behaviors of the button element itself.

<Canvas>
    <Story name="Disabled state">
        <View style={{flexDirection: "row"}}>
            <Button
                style={styles.button}
                onClick={(e) => console.log("Hello, world!")}
                disabled={true}
            >
                Primary
            </Button>
            <Button
                style={styles.button}
                href={"/foo"}
                kind="secondary"
                disabled={true}
            >
                Secondary
            </Button>
            <Button
                style={styles.button}
                onClick={(e) => console.log("Hello, world!")}
                kind="tertiary"
                disabled={true}
            >
                Tertiary
            </Button>
        </View>
    </Story>
</Canvas>

### References

-   [Implicit ARIA semantics](https://www.w3.org/TR/wai-aria-1.1/#implicit_semantics)
-   [Document conformance requirements](https://www.w3.org/TR/html-aria/#document-conformance-requirements-for-use-of-aria-attributes-in-html)

For more details, see the [Accessibility section](https://www.w3.org/TR/wai-aria-practices-1.1/#button) in w3.org.

export const styles = StyleSheet.create({
    button: {
        marginRight: 10,
    },
});
