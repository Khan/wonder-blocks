import {Meta} from "@storybook/blocks";

<Meta
    title="Packages / Data / GraphQL"
/>

# GraphQL in Wonder Blocks Data

Wonder Blocks Data provides some utility types and functionality to assist in performing GraphQL requests. To use them, your React app should include the <a href="./?path=/docs/packages-data-exports-gqlrouter--docs">`GqlRouter`</a> component to specify the method responsible for actually making the GraphQL requests, as well as any default context that requests should include.

The <a href="./?path=/docs/packages-data-exports-gqlrouter--docs">`GqlRouter`</a> component uses React context to convey this information to the <a href="./?path=/docs/packages-data-exports-usegql--docs">`useGql`</a> hook, which provides a wrapper to the fetch function, allowing for simplified invocation of requests that can merge context changes with the default context as well as only provide context and variables when needed.

## Testing

By using the <a href="./?path=/docs/packages-data-exports-gqlrouter--docs">`GqlRouter`</a> in combination with the <a href="./?path=/docs/packages-testing-exports-mockgqlfetch">`mockGqlFetch()`</a> API from Wonder Blocks Testing, you can easily mock your GraphQL responses in tests and stories.

```tsx
const mockFetch = mockGqlFetch()
    .mockOperation(...);

<GqlRouter fetch={mockFetch} defaultContext={{}}>
    <MyComponent />
</GqlRouter>
```

## Server-side rendering and hydration of GraphQL

Server-side rendering and hydration of GraphQL data can be achieved by combining the <a href="./?path=/docs/packages-data-exports-usegql--docs">`useGql`</a> hook with the <a href="./?path=/docs/packages-data-exports/usehydrationeffect--docs">`useHydrationEffect`</a> hook.

More details about server-side rendering with Wonder Blocks Data can be found in the <a href="./?path=/docs/packages-data-server-side-rendering-and-hydration--docs">relevant overview section</a>.
