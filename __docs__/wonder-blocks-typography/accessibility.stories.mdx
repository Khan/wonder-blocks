import {Meta, Story, Canvas} from "@storybook/blocks";
import {StyleSheet} from "aphrodite";

import Color from "@khanacademy/wonder-blocks-color";
import {View} from "@khanacademy/wonder-blocks-core";
import Icon, {icons} from "@khanacademy/wonder-blocks-icon";
import Spacing from "@khanacademy/wonder-blocks-spacing";
import {Body} from "@khanacademy/wonder-blocks-typography";

<Meta
    title="Typography / Accessibility"
    parameters={{
        previewTabs: {
            canvas: {hidden: true},
        },
        viewMode: "docs",
        chromatic: {
            // Disables chromatic testing for these stories.
            disableSnapshot: true,
        },
    }}
/>

## Typography Accessibility

### Rules of Thumb

-   The font size should be large enough for the text to be readable. The
    font size for the Wonder Blocks Typography `Body` element is currently
    set to be 16px. Headings are even larger.
    -   Each Wonder Blocks Typography component has its own predetermined
        font size - this cannot be updated by the user via the `styles` prop.
-   The color contrast should pass WCAG.
    -   "WCAG 2.0 level AA requires a contrast ratio of at least 4.5:1 for
        normal text and 3:1 for large text." [(Contrast Checker, WebAIM)](https://webaim.org/resources/contrastchecker/).
-   It is best to use a familiar font that is easy to read. By default,
    most Wonder Blocks Typography elements use Lato (a sans-serif font) for
    Latin-based languages, and Noto for Non-Latin languages such as Arabic,
    Armenian, Greek, and Hebrew. The `BodySerif` and `BodySerifBlock`
    components use the Noto Serif font.
    -   Note that sans-serif fonts are generally recommended for use on web,
        but serif fonts may be preferable for some users, such as users with
        dyslexia.
-   There should be adequate line spacing in order to make text easier to read.
    Each Wonder Blocks Typography component has its own predetermined
    line height - this cannot be updated by the user via the `styles` prop.

More information about all these points and more can be found in the
[References](#references) below.

### Demo: Font size

<Canvas>
    <Story name="Font size">
        <View>
            <View style={styles.explanation}>
                <Icon icon={icons.incorrect} style={styles.incorrect} />
                <Body>
                    The following text is too small for body text (10px):
                </Body>
            </View>
            <View style={{fontSize: "10px"}}>
                <p>The quick brown fox jumps over the lazy dog.</p>
            </View>
            <View style={styles.explanation}>
                <Icon icon={icons.correct} style={styles.correct} />
                <Body>
                    The following text is adequate for body text (16px):
                </Body>
            </View>
            <Body>The quick brown fox jumps over the lazy dog</Body>
        </View>
    </Story>
</Canvas>

### Demo: Color contrast

<Canvas>
    <Story name="Color contrast">
        <View>
            <View style={styles.explanation}>
                <Icon icon={icons.incorrect} style={styles.incorrect} />
                <Body>
                    The color contrast for the following text is too low:
                </Body>
            </View>
            <Body style={{color: Color.offBlack32}}>
                The quick brown fox jumps over the lazy dog
            </Body>
            <View style={styles.explanation}>
                <Icon icon={icons.correct} style={styles.correct} />
                <Body>
                    The color contrast for the following text is adequate:
                </Body>
            </View>
            <Body style={{color: Color.offBlack}}>
                The quick brown fox jumps over the lazy dog
            </Body>
        </View>
    </Story>
</Canvas>

### Demo: Line spacing

<Canvas>
    <Story name="Line spacing">
        <View>
            <View style={styles.explanation}>
                <Icon icon={icons.incorrect} style={styles.incorrect} />
                <Body>The following line spacing is too small:</Body>
            </View>
            <View style={{lineHeight: 1}}>
                <p>
                    Khan Academy offers practice exercises, instructional
                    videos, and a personalized learning dashboard that empower
                    learners to study at their own pace in and outside of the
                    classroom. We tackle math, science, computing, history, art
                    history, economics, and more, including K-14 and test
                    preparation (SAT, Praxis, LSAT) content. We focus on skill
                    mastery to help learners establish strong foundations, so
                    there's no limit to what they can learn next!
                </p>
            </View>
            <View style={styles.explanation}>
                <Icon icon={icons.correct} style={styles.correct} />
                <Body>The following line spacing is adequate:</Body>
            </View>
            <Body>
                Khan Academy offers practice exercises, instructional videos,
                and a personalized learning dashboard that empower learners to
                study at their own pace in and outside of the classroom. We
                tackle math, science, computing, history, art history,
                economics, and more, including K-14 and test preparation (SAT,
                Praxis, LSAT) content. We focus on skill mastery to help
                learners establish strong foundations, so there's no limit to
                what they can learn next!
            </Body>
        </View>
    </Story>
</Canvas>

### References

-   [Typefaces and Fonts - WebAIM](https://webaim.org/techniques/fonts/)
-   [Contrast Checker - WebAIM](https://webaim.org/resources/contrastchecker)

export const styles = StyleSheet.create({
    explanation: {
        fontWeight: 700,
        flexDirection: "row",
        marginTop: Spacing.xSmall_8,
    },
    correct: {
        color: Color.green,
        marginRight: Spacing.xxxSmall_4,
        paddingTop: Spacing.xxxxSmall_2,
    },
    incorrect: {
        color: Color.red,
        marginRight: Spacing.xxxSmall_4,
        paddingTop: Spacing.xxxxSmall_2,
    },
});
