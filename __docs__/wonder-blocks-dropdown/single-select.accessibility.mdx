import {Meta, Story, Canvas} from "@storybook/blocks";
import * as SingleSelectAccessibilityStories from './single-select.accessibility.stories';

import {OptionItem, SingleSelect} from "@khanacademy/wonder-blocks-dropdown";
import {View} from "@khanacademy/wonder-blocks-core";
import {LabelLarge} from "@khanacademy/wonder-blocks-typography";

<Meta of={SingleSelectAccessibilityStories} />

export const SingleSelectAccessibility = () => (
    <View>
        <LabelLarge
            tag="label"
            id="label-for-single-select"
            htmlFor="unique-single-select"
        >
            Associated label element
        </LabelLarge>
        <SingleSelect
            aria-labelledby="label-for-single-select"
            id="unique-single-select"
            placeholder="Accessible SingleSelect"
            selectedValue="one"
        >
            <OptionItem
                label="First element"
                aria-label="First element, selected"
                value="one"
            />
            <OptionItem
                label="Second element"
                aria-label="Second element, unselelected"
                value="two"
            />
        </SingleSelect>
    </View>
);

# SingleSelect Accessibility

## Labeling the `SingleSelect` opener and option items

If you need to associate this component with another element (e.g. `<label>`),
make sure to pass the `aria-labelledby` or `id` props to the `SingleSelect` component.

An `id` on the SingleSelect would pair with `<label for="id">`, while `aria-labelledby`
on the SingleSelect could associate it with the `id` of any other element. By using
one of these methods, the `opener` will pair with the associated label and
expose that label's text for its accessible name.

Also, if you need screen readers to understand relevant information on
option items, you can use `aria-label` on each item. e.g. You can use it to let
screen readers know the current selected/unselected status of the item when it
receives focus.

<Canvas of={SingleSelectAccessibilityStories.UsingAriaAttributes} />

## Using `aria-label` for the opener

For cases where the `SingleSelect` is not paired with a `LabeledField` or other
visible `<label>` element, you **must** supply an `aria-label` attribute
for an accessible name on the opener.

This will ensure the `SingleSelect` has a name that describes its purpose.

For example, an `aria-label` for `SingleSelect` in a vocabulary quiz could be
"Adjective 1" while its value would be one of the selected options, such as "happy".
It might also have a placeholder value of "Select an option", which would go away
when the user selected an option.

<Canvas of={SingleSelectAccessibilityStories.UsingOpenerAriaLabel} />
