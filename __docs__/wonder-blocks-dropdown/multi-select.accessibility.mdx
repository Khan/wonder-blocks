import {Meta, Story, Canvas} from "@storybook/blocks";
import * as MultiSelectAccessibilityStories from './multi-select.accessibility.stories';

import {OptionItem, MultiSelect} from "@khanacademy/wonder-blocks-dropdown";
import {View} from "@khanacademy/wonder-blocks-core";
import {LabelLarge} from "@khanacademy/wonder-blocks-typography";

<Meta of={MultiSelectAccessibilityStories} />

export const MultiSelectAccessibility = () => (
    <View>
        <LabelLarge
            tag="label"
            id="label-for-multi-select"
            htmlFor="unique-multi-select"
        >
            Associated label element
        </LabelLarge>
        <MultiSelect
            aria-labelledby="label-for-multi-select"
            id="unique-multi-select"
            selectedValues={["one"]}
        >
            <OptionItem
                label="First element"
                aria-label="First element, selected"
                value="one"
            />
            <OptionItem
                label="Second element"
                aria-label="Second element, unselelected"
                value="two"
            />
        </MultiSelect>
    </View>
);

# MultiSelect Accessibility

## Labeling the `MultiSelect` opener and option items

If you need to associate this component with another element (e.g. `<label>`),
make sure to pass the `aria-labelledby` or `id` props to the `MultiSelect` component.

An `id` on the MultiSelect would pair with `<label for="id">`, while `aria-labelledby`
on the MultiSelect could associate it with the `id` of any other element. By using
one of these methods, the `opener` will pair with the associated label and expose
that label's text for its accessible name.

Also, if you need screen readers to understand relevant information on
option items, you can use `aria-label` on each item. e.g. You can use it to let
screen readers know the current selected/unselected status of the item when it
receives focus.

<Canvas of={MultiSelectAccessibilityStories.UsingAriaAttributes} />

## Using `aria-label` for the opener

For cases where the `MultiSelect` is not paired with a `LabeledField` or other
visible `<label>` element, you **must** supply an `aria-label` attribute
for an accessible name on the opener.

This will ensure the `MultiSelect` has a name that describes its purpose.

For example, an `aria-label` for `MultiSelect` in a geography quiz could be
"Countries in North America" while its value would be one or more of the selected
options, such as "USA" or "3 selected". It might also have a placeholder value of
"Select a country", which would go away when the user selected an option.

<Canvas of={MultiSelectAccessibilityStories.UsingOpenerAriaLabel} />
